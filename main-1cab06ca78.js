!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){t(1);t(3),t(4),t(5),t(8),t(11),t(17),t(18)},function(e,n,t){e.exports=t(2).module("app",["ngRoute","ngStorage"])},function(e,n){e.exports=angular},function(e,n){},function(e,n){e.exports={icon0:"_3kiQWo",rotate:"_2GVRvD",move0:"_1Pst8o",icon1:"vsFxrw",move1:"_2MXAZR",icon2:"_3eTMQs",move2:"_2prDJW",icon3:"_2L1_Qk",move3:"_2_noVz",icon4:"_2hVB2a",move4:"_1sRuJP",icon5:"_1mky_v",move5:"_30hXA6",icon6:"_14ieiu",move6:"_1STrSp",icon7:"_1HHKJ5",move7:"XGMVlg",icon8:"_3rD_iQ",move8:"_1qqGGe",icon9:"_26BKsP",move9:"_3dscAZ",icon10:"_2wW024",move10:"_1dUfnA",icon11:"_1dWX-V",move11:"_2yZMhs",icon12:"_2J0uSF",move12:"_1hH4iM",icon13:"_2SsO7X",move13:"y1Kvnf",icon14:"_3T9Sg3",move14:"_2Jcnwf",icon15:"_1j8JBZ",move15:"lQB5Hj",icon16:"_2wrbUf",move16:"o8FR4V",icon17:"_2IV6Hk",move17:"wyLVX_",icon18:"_1obnRO",move18:"wE9rKU",icon19:"CgdZO9",move19:"qfomPR",icon20:"cbLZk2",move20:"_1OTggF",icon21:"_3WqNhg",move21:"KByxMK",icon22:"_2rdhr8",move22:"_3OEcSJ",icon23:"_3aSKcA",move23:"_3yOAtN",icon24:"_1JAsPT",move24:"_3_6n0M",icon25:"_1FEM-x",move25:"_3-cRGy",icon26:"_1lLPpp",move26:"_1A9Z40",icon27:"_229veP",move27:"_13FTYP",icon28:"_3cRZuu",move28:"_1ThFpy",icon29:"RviMrP",move29:"_1zZUhZ",icon30:"G0BUUO",move30:"_2ckz8e",icon31:"A1vehD",move31:"_1DLZ_D",icon32:"_3ZH1NQ",move32:"_1YBmU9",icon33:"_2zhJVW",move33:"_1_pnJP"}},function(e,n,t){var i=t(1),o=t(6),c=t(7);i.config(["$localStorageProvider",function(e){"use strict";e.setKeyPrefix("game_")}]).config(["$routeProvider",function(e){"use strict";e.when("/",{templateUrl:o,controller:"MenuController"}).when("/game",{templateUrl:c,game:!1,controller:"GameController"}).otherwise({redirectTo:"/"})}])},function(e,n){var t="/app/js/menu/view.tmpl.html",i='<div class=main><div menu-button button-style="button-menu menu-width" action=newgame>New Game</div><div class="block menu-width"><div class=block-title>Board sizes</div><div class=block-options><span ng-repeat="size in sizes track by $index" ng-class="{\'block-options-item-selected\': sizes[$index].active}" ng-click=setSize(sizes[$index].name) class="block-options-item block-options-item-active">{{sizes[$index].name}}</span></div></div></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(t,i)}]),e.exports=t},function(e,n){var t="/app/js/game/view.tmpl.html",i="<div board></div>";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,i)}]),e.exports=t},function(e,n,t){var i=t(1);t(9),i.controller("MenuController",["$scope","$location","settings",function(e,n,t){"use strict";e.sizes=t.getState(),e.setSize=function(n){e.sizes=t.setState(n)},e.newgame=function(){n.url("/game")}}])},function(e,n,t){var i=t(1),o=t(10);i.directive("menuButton",["$location",function(){"use strict";return{restricts:"A",replace:!0,scope:{buttonStyle:"@",action:"="},transclude:!0,templateUrl:o}}])},function(e,n){var t="/app/js/directives/menu-button.tmpl.html",i='<div ng-class=buttonStyle ng-click=action() ng-transclude class="button button-centered"></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(t,i)}]),e.exports=t},function(e,n,t){var i=t(1);t(9),t(12),i.controller("GameController",["$scope","settings","puzzleMetrics",function(e,n,t){"use strict";var i=n.getActiveSize();e.boardSize=i*t.size+2*t.space*i}])},function(e,n,t){var i=t(1),o=t(13),c=t(4),a=t(14),r=0,s=(t(15),function(e,n){"use strict";var t,i,o,a,s=[],u=!1,l=e.slice(0),m=Array.apply(null,Array(n*n)).map(function(e,n){return n}),p=function(e){return Math.floor(Math.random()*e)};for(t=0;n*n/2>t;t++)o=l.splice(p(l.length),1)[0],i=[m.splice(p(m.length),1)[0],m.splice(p(m.length),1)[0]],a={solved:!1,clicks:0,classes:c[o],open:u},s.push(angular.extend({id:i[0],pair:i[1]},a,{index:r++}),angular.extend({id:i[1],pair:i[0]},a,{index:r++}));return s.slice(0).sort(function(e,n){return e.id-n.id})});i.directive("board",["settings","puzzleMetrics","$location",function(e,n,t){"use strict";return{restrict:"A",replace:!0,templateUrl:o,link:function(i){i.metricsStyle="width:"+n.size+"px; height: "+n.size+"px; margin: "+n.space+"px",i.animationName=c.rotate,i.gotomenu=function(){t.url("/")},i.countClicks=function(){i.clicks++},i.newgame=function(){i.puzzles=s(a,e.getActiveSize()),i.solved=!1,i.opened=[],i.clicks=0},i.toggle=function(e){i.$apply(function(){var n=!i.puzzles[e].open;i.puzzles[e].open=n,n&&i.opened.push(e),i.check(),i.updateBoard()})},i.check=function(){var e,n=i.puzzles;i.opened.length<2||(e=i.opened.splice(0,2),n[e[0]].pair===n[e[1]].id?i.puzzles[e[0]].solved=i.puzzles[e[1]].solved=!0:e.forEach(function(e){i.puzzles[e].clicks++}))},i.updateBoard=function(){i.solved=i.puzzles.every(function(e){return e.solved})},i.newgame()}}}])},function(e,n){var t="/app/js/directives/board.tmpl.html",i='<div><div class=board-game-menu ng-style="{width: boardSize + \'px\'}"><div menu-button button-style=button-game action=gotomenu>Main menu</div><div ng-if=!solved class=board-game-menu-info>Clicks: {{clicks}}</div><div ng-if=solved menu-button button-style=button-game action=newgame>You won! Start a new game!</div></div><div class=board ng-style="{width: boardSize + \'px\'}"><div puzzle ng-repeat="puzzle in puzzles track by puzzle.index"></div></div></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(t,i)}]),e.exports=t},function(e,n){e.exports=["icon0","icon1","icon2","icon3","icon4","icon5","icon6","icon7","icon8","icon9","icon10","icon11","icon12","icon13","icon14","icon15","icon16","icon17","icon18","icon19","icon20","icon21","icon22","icon23","icon24","icon25","icon26","icon27","icon28","icon29","icon30","icon31","icon32","icon33"]},function(e,n,t){var i=t(1),o=t(16);i.directive("puzzle",["$window",function(e){"use strict";return{restrict:"A",replace:!0,templateUrl:o,link:function(n,t,i){var o=n.puzzles[i.id];n.$watch("puzzles[$index].clicks",function(n,i){i!==n&&e.requestAnimationFrame(function(){t.removeClass("puzzle-animated-paused")})}),t.on("animationiteration",function(o){o.animationName===n.animationName&&e.requestAnimationFrame(function(){t.addClass("puzzle-animated-paused"),n.toggle(i.id)})}),t.on("click",function(){o.open||o.solved||(n.countClicks(),e.requestAnimationFrame(function(){t.removeClass("puzzle-animated-paused")}))})}}}])},function(e,n){var t="/app/js/directives/puzzle.tmpl.html",i='<div class="puzzle puzzle-animated puzzle-animated-paused" data-id={{::puzzle.id}} ng-class=puzzle.classes style={{::metricsStyle}}></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(t,i)}]),e.exports=t},function(e,n,t){var i=t(1);i.service("settings",["$localStorage",function(e){"use strict";var n=[{name:"4×4",active:!1},{name:"6×6",active:!0},{name:"8×8",active:!1}];this.getState=function(){var t=e.state;return t||(e.state=t=n),n.map(function(e,n){return angular.extend({},e,t[n])})},this.getActiveSize=function(){var e=this.getState().filter(function(e){return e.active})[0].name;return+e[0]},this.setState=function(n){var t=this.getState().map(function(e){return e.active=e.name===n,e});return e.state=t,t}}])},function(e,n,t){var i=t(1);i.constant("puzzleMetrics",{size:52,space:6})}]);
//# sourceMappingURL=main.js.map